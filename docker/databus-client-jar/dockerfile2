FROM openjdk:8-jre

RUN mkdir -p "databus-client"
WORKDIR /databus-client

#ARG JAR_DOWNLOAD_URI=$(curl -s https://api.github.com/repos/dbpedia/databus-client/releases/latest | grep browser_download_url | cut -d '"' -f 4)
#RUN export jarDownloadUri=$(curl -s https://api.github.com/repos/dbpedia/databus-client/releases/latest | grep browser_download_url | cut -d '"' -f 4); wget -O databus-client.jar $jarDownloadUri;
#RUN export jarDownloadUri=$(curl -s https://api.github.com/repos/dbpedia/databus-client/releases/latest | grep browser_download_url | cut -d '"' -f 4); curl -L $jarDownloadUri > databus-client.jar;

RUN curl -s https://api.github.com/repos/dbpedia/databus-client/releases/latest | grep browser_download_url | cut -d '"' -f 4 | xargs -I{} curl -L {} > databus-client.jar

COPY ./entrypoint.sh /databus-client/

#RUN git checkout a3772ef1e3bd835ac503f38807b94b7fa005028a  \
# && mvn install
#RUN mvn install

RUN mkdir -p /var/repo && mkdir -p /var/toLoad

ENTRYPOINT ["/bin/bash","/databus-client/entrypoint.sh"]
